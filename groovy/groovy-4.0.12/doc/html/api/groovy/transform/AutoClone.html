<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>AutoClone (Groovy 4.0.12)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: groovy.transform, annotation type: AutoClone">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a>&nbsp;|&nbsp;</li>
<li>Required</li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">groovy.transform</a></div>
<h1 title="Annotation Type AutoClone" class="title">Annotation Type AutoClone</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">AutoClone</span></div>
<div class="block">Class annotation used to assist in the creation of <code>Cloneable</code> classes.
 The <code>@AutoClone</code> annotation instructs the compiler to execute an
 AST transformation which adds a public <code>clone()</code> method and adds
 <code>Cloneable</code> to the list of interfaces which the class implements.
 <p>
 Because the JVM doesn't have a one-size fits all cloning strategy, several
 customizations exist for the cloning implementation. By default, the <code>clone()</code>
 method will call <code>super.clone()</code> before calling <code>clone()</code> on each
 <code>Cloneable</code> property of the class.
 <p>
 Example usage:
 <pre>
 import groovy.transform.AutoClone
 <code>@AutoClone</code>
 class Person {
   String first, last
   List favItems
   Date since
 }
 </pre>
 Which will create a class equivalent to the following:
 <pre>
 class Person implements Cloneable {
   ...
   public Person clone() throws CloneNotSupportedException {
     Person result = (Person) super.clone()
     result.favItems = favItems instanceof Cloneable ? (List) favItems.clone() : favItems
     result.since = (Date) since.clone()
     return result
   }
   ...
 }
 </pre>
 Which can be used as follows:
 <pre>
 def p = new Person(first:'John', last:'Smith', favItems:['ipod', 'shiraz'], since:new Date())
 def p2 = p.clone()

 assert p instanceof Cloneable
 assert p.favItems instanceof Cloneable
 assert p.since instanceof Cloneable
 assert !(p.first instanceof Cloneable)

 assert !p.is(p2)
 assert !p.favItems.is(p2.favItems)
 assert !p.since.is(p2.since)
 assert p.first.is(p2.first)
 </pre>
 In the above example, <code>super.clone()</code> is called which in this case
 calls <code>clone()</code> from <code>java.lang.Object</code>. This does a bit-wise
 copy of all the properties (references and primitive values). Properties
 like <code>first</code> has type <code>String</code> which is not <code>Cloneable</code>
 so it is left as the bit-wise copy. Both <code>Date</code> and <code>ArrayList</code>
 are <code>Cloneable</code> so the <code>clone()</code> method on each of those properties
 will be called. For the list, a shallow copy is made during its <code>clone()</code> method.
 <p>
 If your classes require deep cloning, it is up to you to provide the appropriate
 deep cloning logic in the respective <code>clone()</code> method for your class.
 <p>
 If one of your properties contains an object that doesn't support cloning
 or attempts deep copying of a data structure containing an object that
 doesn't support cloning, then a <code>CloneNotSupportedException</code> may occur
 at runtime.
 <p>
 Another popular cloning strategy is known as the copy constructor pattern.
 If any of your fields are <code>final</code> and <code>Cloneable</code> you should set
 <code>style=COPY_CONSTRUCTOR</code> which will then use the copy constructor pattern.
 Here is an example making use of the copy constructor pattern:
 <pre>
 import groovy.transform.AutoClone
 import static groovy.transform.AutoCloneStyle.*
 <code>@AutoClone(style=COPY_CONSTRUCTOR)</code>
 class Person {
   final String first, last
   final Date birthday
 }
 <code>@AutoClone(style=COPY_CONSTRUCTOR)</code>
 class Customer extends Person {
   final int numPurchases
   final List favItems
 }
 </pre>
 Which will create classes equivalent to the following:
 <pre>
 class Person implements Cloneable {
   ...
   protected Person(Person other) throws CloneNotSupportedException {
     first = other.first
     last = other.last
     birthday = (Date) other.birthday.clone()
   }
   public Person clone() throws CloneNotSupportedException {
     return new Person(this)
   }
   ...
 }
 class Customer extends Person {
   ...
   protected Customer(Customer other) throws CloneNotSupportedException {
     super(other)
     numPurchases = other.numPurchases
     favItems = other.favItems instanceof Cloneable ? (List) other.favItems.clone() : other.favItems
   }
   public Customer clone() throws CloneNotSupportedException {
     return new Customer(this)
   }
   ...
 }
 </pre>
 If you use this style on a child class, the parent class must
 also have a copy constructor (created using this annotation or by hand).
 This approach can be slightly slower than the traditional cloning approach
 but the <code>Cloneable</code> fields of your class can be final. When using the copy constructor style,
 you can provide your own custom constructor by hand if you wish. If you do so, it is up to you to
 correctly copy, clone or deep clone the properties of your class.
 <p>
 As a variation of the last two styles, if you set <code>style=SIMPLE</code>
 then the no-arg constructor will be called followed by setting the
 individual properties (and/or fields) calling <code>clone()</code> if the
 property/field implements <code>Cloneable</code>. Here is an example:
 <pre>
 import groovy.transform.AutoClone
 import static groovy.transform.AutoCloneStyle.*
 <code>@AutoClone(style=SIMPLE)</code>
 class Person {
   final String first, last
   final Date birthday
 }
 <code>@AutoClone(style=SIMPLE)</code>
 class Customer {
   final List favItems
 }
 </pre>
 Which will create classes equivalent to the following:
 <pre>
 class Person implements Cloneable {
   ...
   public Person clone() throws CloneNotSupportedException {
     def result = new Person()
     copyOrCloneMembers(result)
     return result
   }
   protected void copyOrCloneMembers(Person other) {
     other.first = first
     other.last = last
     other.birthday = (Date) birthday.clone()
   }
   ...
 }
 class Customer extends Person {
   ...
   public Customer clone() throws CloneNotSupportedException {
     def result = new Customer()
     copyOrCloneMembers(result)
     return result
   }
   protected void copyOrCloneMembers(Customer other) {
     super.copyOrCloneMembers(other)
     other.favItems = favItems instanceof Cloneable ? (List) favItems.clone() : favItems
   }
   ...
 }
 </pre>
 You would typically use this style only for base classes where you didn't
 want the normal <code>Object</code> <code>clone()</code> method to be called and
 you would typically need to use the <code>SIMPLE</code> style for any child classes.
 <p>
 As a final example, if your class already implements the <code>Serializable</code>
 or <code>Externalizable</code> interface, you can choose the following cloning style:
 <pre>
 <code>@AutoClone(style=SERIALIZATION)</code>
 class Person implements Serializable {
   String first, last
   Date birthday
 }
 </pre>
 which outputs a class with the following form:
 <pre>
 class Person implements Cloneable, Serializable {
   ...
   Person clone() throws CloneNotSupportedException {
     def baos = new ByteArrayOutputStream()
     baos.withObjectOutputStream{ it.writeObject(this) }
     def bais = new ByteArrayInputStream(baos.toByteArray())
     bais.withObjectInputStream(getClass().classLoader){ (Person) it.readObject() }
   }
   ...
 }
 </pre>
 This will output an error if your class doesn't implement one of
 <code>Serializable</code> or <code>Externalizable</code>, will typically be
 significantly slower than the other approaches, also doesn't
 allow fields to be final, will take up more memory as even immutable classes
 like String will be cloned but does have the advantage that it performs
 deep cloning automatically.
 <p>
 Further references on cloning:
 <ul>
 <li><a href="http://www.codeguru.com/java/tij/tij0128.shtml">http://www.codeguru.com/java/tij/tij0128.shtml</a>
 <li><a href="http://www.artima.com/objectsandjava/webuscript/ClonCollInner1.html">http://www.artima.com/objectsandjava/webuscript/ClonCollInner1.html</a>
 <li><a href="http://courses.dce.harvard.edu/~cscie160/JDCTipsCloning">http://courses.dce.harvard.edu/~cscie160/JDCTipsCloning</a>
 <li><a href="http://www.agiledeveloper.com/articles/cloning072002.htm">http://www.agiledeveloper.com/articles/cloning072002.htm</a>
 </ul></div>
<dl class="notes">
<dt>Since:</dt>
<dd>1.8.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="AutoCloneStyle.html" title="enum in groovy.transform"><code>AutoCloneStyle</code></a></li>
<li><a href="ExternalizeMethods.html" title="annotation in groovy.transform"><code>ExternalizeMethods</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#excludes()" class="member-name-link">excludes</a></code></div>
<div class="col-last even-row-color">
<div class="block">Comma separated list of property (and/or field) names to exclude from cloning.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#includeFields()" class="member-name-link">includeFields</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Include fields as well as properties when cloning.</div>
</div>
<div class="col-first even-row-color"><code><a href="AutoCloneStyle.html" title="enum in groovy.transform">AutoCloneStyle</a></code></div>
<div class="col-second even-row-color"><code><a href="#style()" class="member-name-link">style</a></code></div>
<div class="col-last even-row-color">
<div class="block">Style to use when cloning.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="excludes()">
<h3>excludes</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">excludes</span></div>
<div class="block">Comma separated list of property (and/or field) names to exclude from cloning.
 For convenience, a String with comma separated names can be used in addition
 to an array (using Groovy's literal list notation) of String values.
 <p>
 NOTE: When using the <code>CLONE</code> style, property (and/or field) copying might occur as part of
 calling <code>super.clone()</code> which will ignore this list. You can then use this list to
 streamline the provided <code>clone()</code> implementation by selecting which Cloneable properties
 (and/or fields) will have a subsequent call to their <code>clone()</code> method. If you have
 immutable properties (and/or fields) this can be useful as the extra <code>clone()</code> will
 not be necessary and cloning will be more efficient.
 <p>
 NOTE: This doesn't affect property (and/or field) copying that might occur as part
 of serialization when using the <code>SERIALIZATION</code> style, i.e. this flag is ignored;
 instead adjust your serialization code to include or exclude the desired
 properties (and/or fields) which should carry over during cloning.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="includeFields()">
<h3>includeFields</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">includeFields</span></div>
<div class="block">Include fields as well as properties when cloning.
 <p>
 NOTE: When using the <code>CLONE</code> style, field copying might occur as part of
 calling <code>super.clone()</code> and might be all you require; if you turn on
 this flag, the provided <code>clone()</code> implementation will also
 subsequently call <code>clone()</code> for each <code>Cloneable</code> field which can be
 useful if you have mutable fields.
 <p>
 NOTE: This doesn't affect field copying that might occur as part of
 serialization when using the <code>SERIALIZATION</code> style, i.e. this flag is ignored;
 instead adjust your serialization code to include or exclude your fields.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="style()">
<h3>style</h3>
<div class="member-signature"><span class="return-type"><a href="AutoCloneStyle.html" title="enum in groovy.transform">AutoCloneStyle</a></span>&nbsp;<span class="element-name">style</span></div>
<div class="block">Style to use when cloning.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>CLONE</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &copy; 2003-2022 The Apache Software Foundation. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
